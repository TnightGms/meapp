<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="style.css">
<title>MeApp</title>
</head>
<body>

<div class="login-box">
    <h2>MEAPP</h2>
    <input id="user" placeholder="Usuario">
    <input id="pass" type="password" placeholder="ContraseÃ±a">
    <button onclick="login()">Entrar</button>
    <button onclick="register()">Registrarse</button>
</div>

<script>
async function register(){
    await fetch("/register", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({
            username:user.value,
            password:pass.value
        })
    });
    alert("Registrado correctamente");
}

async function login(){
    const res = await fetch("/login", {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({
            username:user.value,
            password:pass.value
        })
    });

    const data = await res.json();
    if(data.success){
        localStorage.setItem("user", user.value);
        window.location = "chat.html";
    } else {
        alert("Login incorrecto");
    }
}
</script>

</body>
</html>
